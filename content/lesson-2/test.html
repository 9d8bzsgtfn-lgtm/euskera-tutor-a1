<h3>Azterketa: Familia eta Lagunak</h3>

<div class="box-importante">
    <span class="tag tag-importante">AZTERKETA</span>
    <p>Test de evaluacion de la Leccion 2. Responde todas las preguntas para ver tu puntuacion.</p>
    <p>2. ikasgaiaren ebaluazio azterketa. Erantzun galdera guztiak zure puntuazioa ikusteko.</p>
</div>

<h4>Zatia A: NORK kasua (10 puntu)</h4>

<div class="exercise" data-points="2">
    <div class="exercise-question">
        <p>1. ______ kafea edaten du. (La madre bebe cafe)</p>
    </div>
    <div class="exercise-options">
        <div class="exercise-option" data-correct="true">Amak</div>
        <div class="exercise-option" data-correct="false">Ama</div>
        <div class="exercise-option" data-correct="false">Amek</div>
        <div class="exercise-option" data-correct="false">Amaka</div>
    </div>
</div>

<div class="exercise" data-points="2">
    <div class="exercise-question">
        <p>2. ______ telebista ikusten du. (El abuelo ve la television)</p>
    </div>
    <div class="exercise-options">
        <div class="exercise-option" data-correct="false">Aitona</div>
        <div class="exercise-option" data-correct="true">Aitonak</div>
        <div class="exercise-option" data-correct="false">Aitonek</div>
        <div class="exercise-option" data-correct="false">Aitonen</div>
    </div>
</div>

<div class="exercise" data-points="2">
    <div class="exercise-question">
        <p>3. ______ ogia erosten du. (El padre compra pan)</p>
    </div>
    <div class="exercise-options">
        <div class="exercise-option" data-correct="false">Aita</div>
        <div class="exercise-option" data-correct="true">Aitak</div>
        <div class="exercise-option" data-correct="false">Aitek</div>
        <div class="exercise-option" data-correct="false">Aitan</div>
    </div>
</div>

<div class="exercise" data-points="2">
    <div class="exercise-question">
        <p>4. Nire ______ liburua irakurtzen du. (Mi hermana lee el libro)</p>
    </div>
    <div class="exercise-options">
        <div class="exercise-option" data-correct="false">arreba</div>
        <div class="exercise-option" data-correct="true">arrebak</div>
        <div class="exercise-option" data-correct="false">arrebek</div>
        <div class="exercise-option" data-correct="false">arreban</div>
    </div>
</div>

<div class="exercise" data-points="2">
    <div class="exercise-question">
        <p>5. Cual de estas frases es correcta?</p>
    </div>
    <div class="exercise-options">
        <div class="exercise-option" data-correct="false">Ama etxean dago (con -k)</div>
        <div class="exercise-option" data-correct="true">Amak ogia jaten du</div>
        <div class="exercise-option" data-correct="false">Aita liburua irakurtzen du (sin -k)</div>
        <div class="exercise-option" data-correct="false">Semek lo egiten du</div>
    </div>
</div>

<h4>Zatia B: Familia eta deskribapenak (6 puntu)</h4>

<div class="exercise" data-points="2">
    <div class="exercise-question">
        <p>6. Como se dice "Mi tia es alta"?</p>
    </div>
    <div class="exercise-options">
        <div class="exercise-option" data-correct="false">Nire osaba altua da</div>
        <div class="exercise-option" data-correct="true">Nire izeba altua da</div>
        <div class="exercise-option" data-correct="false">Nire altua izeba da</div>
        <div class="exercise-option" data-correct="false">Nire izebak altua da</div>
    </div>
</div>

<div class="exercise" data-points="2">
    <div class="exercise-question">
        <p>7. Que significa "Gure aitona zaharra da"?</p>
    </div>
    <div class="exercise-options">
        <div class="exercise-option" data-correct="false">Mi abuelo es joven</div>
        <div class="exercise-option" data-correct="true">Nuestro abuelo es viejo/mayor</div>
        <div class="exercise-option" data-correct="false">Tu abuelo es alto</div>
        <div class="exercise-option" data-correct="false">Su abuelo es pequeno</div>
    </div>
</div>

<div class="exercise" data-points="2">
    <div class="exercise-question">
        <p>8. Como se dice "el hijo pequeno" (estructura correcta)?</p>
    </div>
    <div class="exercise-options">
        <div class="exercise-option" data-correct="true">seme txikia</div>
        <div class="exercise-option" data-correct="false">txikia semea</div>
        <div class="exercise-option" data-correct="false">semea txikia</div>
        <div class="exercise-option" data-correct="false">txiki semea</div>
    </div>
</div>

<h4>Zatia C: Zenbakiak 11-20 (4 puntu)</h4>

<div class="exercise" data-points="2">
    <div class="exercise-question">
        <p>9. Cual es la secuencia correcta: 16, 17, 18?</p>
    </div>
    <div class="exercise-options">
        <div class="exercise-option" data-correct="false">hamabost, hamasei, hamazazpi</div>
        <div class="exercise-option" data-correct="true">hamasei, hamazazpi, hemezortzi</div>
        <div class="exercise-option" data-correct="false">hamazazpi, hemezortzi, hemeretzi</div>
        <div class="exercise-option" data-correct="false">hamalau, hamabost, hamasei</div>
    </div>
</div>

<div class="exercise" data-points="2">
    <div class="exercise-question">
        <p>10. Cuanto es "hamaika + bederatzi"?</p>
    </div>
    <div class="exercise-options">
        <div class="exercise-option" data-correct="false">hemeretzi</div>
        <div class="exercise-option" data-correct="true">hogei</div>
        <div class="exercise-option" data-correct="false">hemezortzi</div>
        <div class="exercise-option" data-correct="false">hamazazpi</div>
    </div>
</div>

<div class="box-complementario">
    <span class="tag tag-complementario">AZTERKETA AMAITU</span>
    <p>Has completado el test de la Leccion 2.</p>
    <p>Para aprobar necesitas al menos 14/20 puntos (70%).</p>
    <div class="test-results" id="testResults">
        <div class="test-score" id="testScore">--/20</div>
        <p id="testFeedback">Completa todos los ejercicios para ver tu puntuacion.</p>
    </div>
</div>

<script>
// Calcular puntuacion cuando se completen todos los ejercicios
document.querySelectorAll('.exercise-option').forEach(option => {
    option.addEventListener('click', function() {
        // Marcar respuesta
        const exercise = this.closest('.exercise');
        exercise.querySelectorAll('.exercise-option').forEach(opt => {
            opt.classList.remove('selected', 'correct', 'incorrect');
        });
        this.classList.add('selected');
        if (this.dataset.correct === 'true') {
            this.classList.add('correct');
        } else {
            this.classList.add('incorrect');
        }

        // Calcular puntuacion total
        let totalPoints = 0;
        let earnedPoints = 0;
        document.querySelectorAll('.exercise').forEach(ex => {
            const points = parseInt(ex.dataset.points) || 2;
            totalPoints += points;
            const selected = ex.querySelector('.exercise-option.selected');
            if (selected && selected.dataset.correct === 'true') {
                earnedPoints += points;
            }
        });

        // Mostrar resultado
        const scoreEl = document.getElementById('testScore');
        const feedbackEl = document.getElementById('testFeedback');
        if (scoreEl) {
            scoreEl.textContent = earnedPoints + '/20';
            const percentage = (earnedPoints / 20) * 100;
            if (percentage >= 90) {
                scoreEl.className = 'test-score excellent';
                feedbackEl.textContent = 'Bikain! Excelente! Has dominado la leccion.';
            } else if (percentage >= 70) {
                scoreEl.className = 'test-score good';
                feedbackEl.textContent = 'Oso ondo! Muy bien! Has aprobado.';
            } else if (percentage >= 50) {
                scoreEl.className = 'test-score needs-work';
                feedbackEl.textContent = 'Saiatu berriro. Repasa la leccion e intentalo de nuevo.';
            } else {
                scoreEl.className = 'test-score poor';
                feedbackEl.textContent = 'Berrikusi ikasgaia. Necesitas repasar la leccion.';
            }
        }
    });
});
</script>
